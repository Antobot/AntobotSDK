# Copyright (c) 2021, ANTOBOT LTD.
# All rights reserved.

# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
# A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
# OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
# LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
# DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
# THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
# OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 

# # # Code Description:     Sets the parameters for operation of the large robot.

# Contact: mert.turanli@antobot.co.uk

# # # #  # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

antobot_robot:
 antobot_joint_state_publisher:
   type: "joint_state_controller/JointStateController"
   publish_rate: 50 

 antobot_velocity_controller:
   type: "swerve_controller/SwerveController"
    
   lf_wheel: "wheel_left_front_joint"
   rf_wheel: "wheel_right_front_joint"
   lh_wheel: "wheel_left_rear_joint"
   rh_wheel: "wheel_right_rear_joint"
   lf_steering: "wheel_left_front_fork_joint"
   rf_steering: "wheel_right_front_fork_joint"
   lh_steering: "wheel_left_rear_fork_joint"
   rh_steering: "wheel_right_rear_fork_joint"

   min_steering_angle: -1.58
   max_steering_angle: 1.58

   wheel_steering_y_offset: 0

   publish_rate: 50
   pose_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.03]
   twist_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.03]
   cmd_vel_timeout: 0.25
 
   # Base frame_id
   base_frame_id: base_link 
 
   # Velocity and acceleration limits
   # Whenever a min_* is unspecified, default to -max_*
   linear:
     x:
       has_velocity_limits    : true
       max_velocity           : 1.5   # m/s
       has_acceleration_limits: true
       max_acceleration       : 3.0   # m/s^2
   angular:
     z:
       has_velocity_limits    : true
       max_velocity           : 3.14   # rad/s
       has_acceleration_limits: true
       max_acceleration       : 6.28   # rad/s^2 

 antobot_joint_controller:
   wheel_left_front_fork_joint_controller:
       type: position_controllers/JointPositionController
       joint: wheel_left_front_fork_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}
   wheel_left_rear_fork_joint_controller:
       type: position_controllers/JointPositionController
       joint: wheel_left_rear_fork_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}
   wheel_right_front_fork_joint_controller:
       type: position_controllers/JointPositionController
       joint: wheel_right_front_fork_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}
   wheel_right_rear_fork_joint_controller:
       type: position_controllers/JointPositionController
       joint: wheel_right_rear_fork_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}
  
   wheel_left_front_joint_controller:
       type: velocity_controllers/JointVelocityController
       joint: wheel_left_front_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}
   wheel_left_rear_joint_controller:
       type: velocity_controllers/JointVelocityController
       joint: wheel_left_rear_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}
   wheel_right_front_joint_controller:
       type: velocity_controllers/JointVelocityController
       joint: wheel_right_front_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}
   wheel_right_rear_joint_controller:
       type: velocity_controllers/JointVelocityController
       joint: wheel_right_rear_joint
       pid: {p: 1.0, i: 0.0, d: 0.0, i_clamp: 1.0}

