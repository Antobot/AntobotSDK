# Copyright (c) 2021, ANTOBOT LTD.
# All rights reserved.

# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
# A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
# OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
# LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
# DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
# THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
# OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 

# # # Code Description:     Defines the parameters for the robot controllers.

# Contact: mert.turanli@antobot.co.uk

# # # #  # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

antobot_joint_publisher:
  type: "joint_state_controller/JointStateController"
  publish_rate: 50

am_robot:
  type: "diff_drive_controller/DiffDriveController"
    
  left_wheel: ["wheel_left_front_joint", "wheel_left_rear_joint"]
  right_wheel: ["wheel_right_front_joint", "wheel_right_rear_joint"]

  wheel_separation_multiplier: 1.0 # default: 1.0
  wheel_radius_multiplier    : 1.0 # default: 1.0

  publish_rate: 50
  pose_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.03]
  twist_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.03]
  cmd_vel_timeout: 0.25
  
  enable_odom_tf: false

  # Base frame_id
  base_frame_id: base_link

  # Velocity and acceleration limits
  # Whenever a min_* is unspecified, default to -max_*
  linear:
    x:
      has_velocity_limits    : true
      max_velocity           : 3.0   # m/s
      has_acceleration_limits: true
      max_acceleration       : 5.0   # m/s^2
      has_jerk_limits        : true
      max_jerk               : 10.0
  angular:
    z:
      has_velocity_limits    : true
      max_velocity           : 3.0   # rad/s
      has_acceleration_limits: true
      max_acceleration       : 5.0   # rad/s^2
      has_jerk_limits        : true
      max_jerk               : 15.0
      

# controllers
      
wheel_left_front_joint_controller:
  type: effort_controllers/JointVelocityController
  joint: wheel_left_front_joint
  pid: {p: 10.0, i: 1.0, d: 0.1, i_clamp: 1000.0}
wheel_left_rear_joint_controller:
  type: effort_controllers/JointVelocityController
  joint: wheel_left_rear_joint
  pid: {p: 10.0, i: 1.0, d: 0.1, i_clamp: 1000.0}
wheel_right_front_joint_controller:
  type: effort_controllers/JointVelocityController
  joint: wheel_right_front_joint
  pid: {p: 10.0, i: 1.0, d: 0.1, i_clamp: 1000.0}
wheel_right_rear_joint_controller:
  type: effort_controllers/JointVelocityController
  joint: wheel_right_rear_joint
  pid: {p: 10.0, i: 1.0, d: 0.1, i_clamp: 1000.0}


# joint limits
joint_limits:
    wheel_left_front_joint:
      has_position_limits: false
      has_velocity_limits: true
      max_velocity: 20
      has_acceleration_limits: false
      max_acceleration: 0.15
      has_jerk_limits: false
      max_jerk: 0.01875
      has_effort_limits: false
      max_effort: 3.1415
      min_effort: -3.1415

    wheel_left_rear_joint:
      has_position_limits: false
      has_velocity_limits: true
      max_velocity: 20
      has_acceleration_limits: false
      max_acceleration: 0.15
      has_jerk_limits: false
      max_jerk: 0.01875
      has_effort_limits: false
      max_effort: 3.1415
      min_effort: -3.1415

    wheel_right_front_joint:
      has_position_limits: false
      has_velocity_limits: true
      max_velocity: 20
      has_acceleration_limits: false
      max_acceleration: 0.15
      has_jerk_limits: false
      max_jerk: 0.01875
      has_effort_limits: false
      max_effort: 3.1415
      min_effort: -3.1415

    wheel_right_rear_joint:
      has_position_limits: false
      has_velocity_limits: true
      max_velocity: 20
      has_acceleration_limits: false
      max_acceleration: 0.15
      has_jerk_limits: false
      max_jerk: 0.01875
      has_effort_limits: false
      max_effort: 3.1415
      min_effort: -3.1415


# gazebo


